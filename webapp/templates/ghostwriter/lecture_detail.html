{% extends 'base.html' %}

{% block title %}{{ item.title }} - Ghostwriter{% endblock %}

{% block content %}
	<div id="fh5co-portfolio">
    <div class="container">
        <ul class="list-group">
            <div class="list-group-item lecture_header" href="{% url 'ghostwriter:lecture' item.pk %}">
                <h1 class="list-group-item-heading">{{ item.title }}</h1>
                <p class="list-group-item-text">day of week: {{ item.get_day_of_week_display }} period: {{ item.get_period_display }}</p>
                <a class="create_question_btn" href="{% url 'ghostwriter:question' item.pk %}"><button class="btn btn-primary">問題作成</button></a>
            </div>
        </ul>
        <div class="row animate-boc">
            <div class="col-md-6">
                <div class="row">
                    {% for image in item.images.all %}
                    <div class="col-md-6">
                        <div class="fh5co-portfolio animate-box">
                            <div class="portfolio-entry" data-target="#{{ image.pk }}" data-toggle="modal" style="background-image: url({{ image.image.url }});cursor: pointer;"></div>
                        </div>
                    </div>
                        <div class="modal fade" id="{{ image.pk }}">
                            <div class="modal-dialog modal-lg align-center">
                                <div class="modal-body">
                                    <img src="{{ image.image.url }}" alt="image_{{ image.title }}" class="img-responsive">
                                        <div class="modal-footer">
                                            <button class="btn btn-md btn-primary" data-dismiss="modal">閉じる</button>
                                        </div>
                                </div>
                            </div>
                        </div>
                    {% endfor %}
                </div>
            </div>
            <div class="col-md-6">
                <div class="panel animate-box">
                    <div class="panel-heading bg-primary">
                        <h3>OCRテキスト</h3>
                    </div>
                    <div class="panel-body">
                        {% if item.task_records.all|length > 0 %}
                            {% if item.task_records.all.0.state != 1 %}
                            <div class="alert {% if item.task_records.all.0.state == 0 %}alert-warning{% else %}alert-danger{% endif %} alert-dismissible fade in">
                                <button type="button" class="close" data-dismiss="alert">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                                OCR is {{ item.task_records.all.0.get_state_display }}
                            </div>
                            {% else %}
                                <p class="ocr_text">{{ item.ocr_text|linebreaksbr }}</p>
                            {% endif %}
                        {% endif %}

                        {% if item.images.all|length == 0 %}
                            <div class="alert alert-warning alert-dismissible fade in">
                                <button type="button" class="close" data-dismiss="alert">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                                スライドがまだ紐付けられていません
                            </div>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </div>
    </div>
{% endblock %}